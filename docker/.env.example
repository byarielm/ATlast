# ═══════════════════════════════════════════════════════
# ATlast Docker Environment Variables — TEMPLATE
# ═══════════════════════════════════════════════════════
# Copy this file to docker/.env and fill in real values.
# NEVER commit docker/.env to git.
#
# Generate secrets with: bash scripts/generate-secrets.sh
# ═══════════════════════════════════════════════════════

# ── Database ──────────────────────────────────────────
# Strong random password for the PostgreSQL 'atlast' user.
# Generate: node -e "process.stdout.write(require('crypto').randomBytes(32).toString('hex'))"
DB_PASSWORD=change-me-use-a-strong-password

# ── OAuth (Bluesky Login) ─────────────────────────────
# EC private key in PEM format, used to sign OAuth tokens.
# Generate: openssl ecparam -genkey -name prime256v1 -noout | openssl pkcs8 -topk8 -nocrypt
# The key spans multiple lines — use \n to represent newlines in a .env file.
OAUTH_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n...your key here...\n-----END PRIVATE KEY-----

# ── Token Encryption ──────────────────────────────────
# REQUIRED — used by the auth middleware to encrypt session tokens.
# This was MISSING from the migration plan's docker-compose — do not skip this.
# Must be a 64-character hex string (32 bytes of randomness).
# Generate: node -e "process.stdout.write(require('crypto').randomBytes(32).toString('hex'))"
TOKEN_ENCRYPTION_KEY=64-char-hex-string-here

# ── Frontend URL ──────────────────────────────────────
# The public URL of the frontend. Used for:
#   - CORS origin validation in the API
#   - OAuth redirect URI construction
# Local testing: http://localhost
# Production:    https://atlast.byarielm.fyi
FRONTEND_URL=http://localhost

# ── Domain (Traefik Router) ───────────────────────────
# The hostname Traefik uses to route requests to the frontend container.
# Defaults to "localhost" if not set (Compose env var fallback: ${DOMAIN:-localhost}).
# Local testing: localhost
# Production:    atlast.byarielm.fyi
DOMAIN=localhost

# ── Cloudflare Tunnel ─────────────────────────────────
# Token from Cloudflare Zero Trust dashboard: Access → Tunnels.
# The tunnel connects your home server to Cloudflare without opening inbound ports.
CLOUDFLARE_TUNNEL_TOKEN=your-tunnel-token-here
